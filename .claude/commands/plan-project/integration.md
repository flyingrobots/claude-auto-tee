# Project Planning Integration Guide

## Overview

The project planning command integrates seamlessly with existing development workflows, providing intelligent automation while respecting developer preferences and team practices.

## Core Integration Patterns

### 1. Git Workflow Integration

#### Branch-Based Planning
```bash
# Plan feature development
git checkout -b feature/user-authentication
claude plan-project --spec ./auth-requirements.md --solo --phase "Auth Feature"

# Plan release preparation
git checkout release/v2.1
claude plan-project --spec ./release-checklist.md --team 3 --phase "Release 2.1"

# Plan hotfix
git checkout hotfix/security-patch
claude plan-project --spec ./security-fix-requirements.md --solo --priority P0
```

#### Git Hook Integration
```bash
# .git/hooks/post-checkout - Auto-plan on branch switch
#!/bin/bash
if [[ -f "requirements.md" || -f "REQUIREMENTS.md" ]]; then
    echo "Planning detected for new branch..."
    claude plan-project --dry-run
fi
```

### 2. IDE Integration

#### VS Code Integration
```json
// .vscode/tasks.json - Generated automatically
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Plan Project",
            "type": "shell",
            "command": "claude",
            "args": ["plan-project", "--spec", "${input:specFile}"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": []
        },
        {
            "label": "Plan with GitHub",
            "type": "shell", 
            "command": "claude",
            "args": [
                "plan-project",
                "--spec", "${input:specFile}",
                "--github-project", "${input:githubRepo}",
                "--output", "roadmap,issues,mermaid"
            ],
            "group": "build"
        }
    ],
    "inputs": [
        {
            "id": "specFile",
            "description": "Specification file path",
            "default": "requirements.md",
            "type": "promptString"
        },
        {
            "id": "githubRepo",
            "description": "GitHub repository (owner/repo)",
            "type": "promptString"
        }
    ]
}
```

#### VS Code Settings
```json
// .vscode/settings.json - Auto-generated recommendations
{
    "files.associations": {
        "ROADMAP-*.md": "markdown",
        "TASKS*.md": "markdown",
        "DEPENDENCY_*.md": "markdown"
    },
    "markdown.extension.toc.updateOnSave": true,
    "markdown.extension.preview.autoShowPreviewToSide": true
}
```

### 3. CI/CD Integration

#### GitHub Actions Workflow
```yaml
# .github/workflows/project-planning.yml
name: Project Planning

on:
  push:
    paths:
      - 'requirements/**'
      - 'specs/**'
      - 'REQUIREMENTS.md'
      - 'requirements.md'
  pull_request:
    paths:
      - 'requirements/**'
      - 'specs/**'

jobs:
  validate-planning:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Claude CLI
        run: |
          # Install Claude CLI (placeholder - actual implementation depends on distribution)
          curl -sSL https://claude-cli.anthropic.com/install.sh | bash
      
      - name: Validate Specification Quality
        run: |
          claude plan-project --dry-run --verbose > planning-validation.log
          
      - name: Generate Planning Artifacts
        if: github.event_name == 'push' && github.ref == 'refs/heads/main'
        run: |
          claude plan-project \
            --spec requirements.md \
            --output roadmap,mermaid \
            --format markdown
            
      - name: Update Planning Documents
        if: github.event_name == 'push' && github.ref == 'refs/heads/main'
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add ROADMAP-*.md DEPENDENCY_DIAGRAM.md TASKS.md
          git diff --staged --quiet || git commit -m "Update project planning artifacts [skip ci]"
          git push
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
      - name: Comment PR with Planning Summary
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v6
        with:
          script: |
            const fs = require('fs');
            const planningLog = fs.readFileSync('planning-validation.log', 'utf8');
            
            const body = `## Project Planning Analysis
            
            \`\`\`
            ${planningLog}
            \`\`\`
            
            Generated by automated project planning validation.`;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: body
            });
```

#### GitLab CI Integration
```yaml
# .gitlab-ci.yml
stages:
  - validate
  - plan
  - deploy

validate-planning:
  stage: validate
  script:
    - claude plan-project --dry-run --verbose
  only:
    changes:
      - requirements/**/*
      - "*.md"

update-planning:
  stage: plan
  script:
    - claude plan-project --output roadmap,mermaid
    - git add ROADMAP-*.md DEPENDENCY_DIAGRAM.md TASKS.md
    - git commit -m "Update planning artifacts" || exit 0
    - git push origin HEAD:$CI_COMMIT_REF_NAME
  only:
    - main
    - develop
```

### 4. Project Management Tool Integration

#### Jira Integration
```bash
# Custom script: sync-to-jira.sh
#!/bin/bash

# Extract tasks from generated TASKS.md and create Jira issues
claude plan-project --format json > planning.json

# Parse JSON and create Jira issues
jq -r '.tasks[] | @json' planning.json | while read task; do
    title=$(echo $task | jq -r '.title')
    description=$(echo $task | jq -r '.description')
    
    curl -X POST \
        -H "Authorization: Basic $JIRA_TOKEN" \
        -H "Content-Type: application/json" \
        "$JIRA_URL/rest/api/2/issue" \
        -d "{
            \"fields\": {
                \"project\": {\"key\": \"$JIRA_PROJECT\"},
                \"summary\": \"$title\",
                \"description\": \"$description\",
                \"issuetype\": {\"name\": \"Task\"}
            }
        }"
done
```

#### Notion Integration
```bash
# Custom script: sync-to-notion.sh
#!/bin/bash

# Convert planning artifacts to Notion-compatible format
claude plan-project --format json | \
    jq '.roadmap' | \
    notion-cli import --page-id $NOTION_PAGE_ID --format json
```

### 5. Monitoring and Analytics Integration

#### Planning Metrics Collection
```bash
# Custom hook: planning-metrics.sh
#!/bin/bash

# Collect metrics on planning effectiveness
PLANNING_START=$(date +%s)

claude plan-project "$@"

PLANNING_END=$(date +%s)
PLANNING_DURATION=$((PLANNING_END - PLANNING_START))

# Send metrics to monitoring system
curl -X POST "$METRICS_ENDPOINT" \
    -H "Content-Type: application/json" \
    -d "{
        \"metric\": \"planning_duration\",
        \"value\": $PLANNING_DURATION,
        \"tags\": {
            \"mode\": \"$EXECUTION_MODE\",
            \"team_size\": \"$TEAM_SIZE\"
        }
    }"
```

### 6. Team Collaboration Integration

#### Slack Integration
```bash
# Slack notification on planning completion
#!/bin/bash

SLACK_WEBHOOK="$SLACK_WEBHOOK_URL"
PROJECT_NAME=$(basename $(pwd))

# Execute planning
claude plan-project "$@"

# Notify team
curl -X POST "$SLACK_WEBHOOK" \
    -H "Content-Type: application/json" \
    -d "{
        \"text\": \"ðŸ“‹ Project planning completed for *$PROJECT_NAME*\",
        \"attachments\": [{
            \"color\": \"good\",
            \"fields\": [{
                \"title\": \"Generated Artifacts\",
                \"value\": \"â€¢ ROADMAP-${EXECUTION_MODE}.md\\nâ€¢ TASKS.md\\nâ€¢ DEPENDENCY_DIAGRAM.md\",
                \"short\": false
            }]
        }]
    }"
```

#### Microsoft Teams Integration
```bash
# Teams notification via webhook
TEAMS_WEBHOOK="$TEAMS_WEBHOOK_URL"

curl -H "Content-Type: application/json" \
     -X POST "$TEAMS_WEBHOOK" \
     -d '{
         "@type": "MessageCard",
         "@context": "http://schema.org/extensions",
         "summary": "Project Planning Complete",
         "themeColor": "0076D7",
         "sections": [{
             "activityTitle": "Project Planning Completed",
             "activitySubtitle": "New artifacts generated",
             "facts": [{
                 "name": "Project",
                 "value": "'$(basename $(pwd))'"
             }, {
                 "name": "Mode", 
                 "value": "'$EXECUTION_MODE'"
             }]
         }]
     }'
```

## Advanced Integration Scenarios

### 1. Multi-Repository Planning
```bash
# Plan across multiple related repositories
#!/bin/bash

REPOS=("frontend" "backend" "api" "shared-lib")
GITHUB_ORG="myorg"

for repo in "${REPOS[@]}"; do
    echo "Planning $repo..."
    cd "$repo"
    
    claude plan-project \
        --spec ./requirements.md \
        --github-project "$GITHUB_ORG/$repo" \
        --phase "Sprint $(date +%Y.%U)" \
        --output roadmap,issues
        
    cd ..
done

# Generate cross-repo dependency analysis
echo "Generating cross-repository analysis..."
claude analyze-dependencies --repos "${REPOS[*]}" --org "$GITHUB_ORG"
```

### 2. Environment-Specific Planning
```bash
# Different planning strategies per environment
case "$ENVIRONMENT" in
    "development")
        claude plan-project --solo --output roadmap,mermaid
        ;;
    "staging")
        claude plan-project --team 3 --output roadmap,issues,mermaid
        ;;
    "production")
        claude plan-project --enterprise --waves 4 --output all --priority P0
        ;;
esac
```

### 3. Compliance Integration
```bash
# SOX/GDPR compliance planning
claude plan-project \
    --spec ./compliance-requirements.md \
    --template enterprise \
    --compliance sox,gdpr \
    --output roadmap,audit-trail,compliance-matrix
```

### 4. Performance Optimization Integration
```bash
# Integrate with performance monitoring
PERFORMANCE_BASELINE=$(curl -s "$PERF_API/baseline")

claude plan-project \
    --spec ./performance-requirements.md \
    --baseline "$PERFORMANCE_BASELINE" \
    --include-perf-tasks \
    --output roadmap,perf-test-plan
```

## Configuration Management

### Global Configuration
```yaml
# ~/.claude/config.yaml
integrations:
  git:
    auto-commit-artifacts: false
    branch-naming-convention: "feature/{task-id}-{summary}"
    
  github:
    default-org: "myorg"
    auto-create-project-boards: true
    issue-templates: true
    
  slack:
    webhook-url: "${SLACK_WEBHOOK}"
    notify-on-completion: true
    notify-on-errors: true
    
  jira:
    server-url: "${JIRA_URL}"
    project-key: "${JIRA_PROJECT}"
    auto-sync-tasks: false
```

### Project-Specific Configuration
```yaml
# .claude/project-config.yaml
project:
  name: "awesome-web-app"
  type: "web-app"
  
integrations:
  github:
    repository: "myorg/awesome-web-app"
    auto-create-issues: true
    
  ci-cd:
    platform: "github-actions"
    auto-update-workflows: true
    
  monitoring:
    collect-metrics: true
    dashboard-url: "https://monitoring.example.com/project/awesome-web-app"
```

## Troubleshooting Integration Issues

### Common Integration Problems

#### Git Integration Issues
```bash
# Permission denied on git operations
git config --global user.name "Claude Planning Bot"
git config --global user.email "claude-planning@example.com"

# Large files in planning artifacts
echo "ROADMAP-*.md" >> .gitignore
echo "DEPENDENCY_*.md" >> .gitignore
git add .gitignore
```

#### CI/CD Pipeline Failures
```bash
# Debug CI/CD integration
claude plan-project --dry-run --verbose --debug > debug.log
cat debug.log  # Review for integration issues
```

#### API Rate Limiting
```bash
# Handle GitHub API rate limits
if ! gh api rate_limit | jq -r '.resources.core.remaining' | grep -q '^0$'; then
    claude plan-project --github-project "myorg/repo" --output issues
else
    echo "GitHub API rate limit reached, generating local artifacts only"
    claude plan-project --output roadmap,mermaid
fi
```

This comprehensive integration guide ensures the project planning command works seamlessly within existing development workflows while providing flexibility for diverse team environments and toolchains.